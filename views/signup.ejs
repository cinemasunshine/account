<form name="signupform" method="post" class="cognito-asf">
    <div id="div-forms" class="pt-4 px-3">
        <h2 class="text-center mb-3 text-large font-weight-bold">基本情報入力</h2>
        <p class="mb-3 text-md-center">必須項目を入力し「次へ」ボタンを押してください</p>


        <% if (messages.validationErrorMessage) { %>
        <p id="validationErrorMessage" class="error text-danger mb-2">
            <%- messages.validationErrorMessage %>
        </p>
        <% } %>
        <% if (messages.errorMessage) { %>
        <p id="errorMessage" class="error text-danger mb-2">
            <%= messages.errorMessage %>
        </p>
        <% } %>
    </div>
    <h3 class="bg-gray py-2 px-3 mb-2">お客様情報</h3>
    <div class="px-3 mb-4">
        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">姓（カタカナ）<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <p class="text-small mb-2 text-dark-gray">全角カタカナで入力してください</p>
                    <input type="text" class="form-control" id="family_name" name="family_name"
                        value="<%= form.family_name %>" placeholder="（例）セイ">
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">名（カタカナ）<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <p class="text-small mb-2 text-dark-gray">全角カタカナで入力してください</p>
                    <input type="text" class="form-control" id="given_name" name="given_name"
                        value="<%= form.given_name %>" placeholder="（例）メイ">
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">メールアドレス<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <input type="email" class="form-control mb-2" placeholder="（例）メールアドレス" id="email" name="email"
                        value="<%= form.email %>">
                    <p><a href="#" data-toggle="modal" data-target="#emailModal"><img class="mr-1 align-middle"
                                src="/images/icon/help_blue.svg" width="16" height="16">メール受信設定について</a></p>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">電話番号<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <p class="text-small mb-2 text-dark-gray">半角数字、ハイフン「-」なしで入力してください</p>
                    <input type="tel" class="form-control" placeholder="（例）電話番号" id="phone_number" name="phone_number"
                        value="<%= form.phone_number %>">
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">生年月日<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <div class="d-flex">
                        <select name="birthdate_year" id="birthdate_year" class="form-control mr-2">
                            <% 
                                var year = (new Date()).getFullYear();
                                const yearsAgo = year - 100;
                                for (; year > yearsAgo;year--) { %>
                            <option <%=(year===parseInt(form.birthdate_year)) ? 'selected' : '' %> value="<%= year %>">
                                <%= year %>年</option>
                            <% } %>
                        </select>
                        <select name="birthdate_month" id="birthdate_month" class="form-control mr-2">
                            <% 
                                for(var i = 1; i <= 12; i++) {
                                    let no = ('0' + i).slice(-2);
                                %>
                            <option <%=(form.birthdate_month===no) ? 'selected' : '' %> value="<%= no %>">
                                <%= i %>月</option>
                            <% } %>
                        </select>
                        <select name="birthdate_day" id="birthdate_day" class="form-control">
                            <% 
                                for(var i = 1; i <= 31; i++) {
                                    let no = ('0' + i).slice(-2);
                                %>
                            <option <%=(form.birthdate_day===no) ? 'selected' : '' %> value="<%= no %>">
                                <%= i %>日</option>
                            <% } %>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">性別<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <div class="d-flex">
                        <select id="gender" name="gender" class="form-control" placeholder=""
                            value="<%= form.gender %>">
                            <option <%=(form.gender==='0' ) ? 'selected' : '' %> value="0">---</option>
                            <option <%=(form.gender==='1' ) ? 'selected' : '' %> value="1">男性</option>
                            <option <%=(form.gender==='2' ) ? 'selected' : '' %> value="2">女性</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">郵便番号<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <p class="text-small mb-2 text-dark-gray">半角数字、ハイフン「-」なしで入力してください</p>
                    <input type="number" class="form-control" placeholder="（例）郵便番号" id="postalCode" name="postalCode"
                        value="<%= form.postalCode %>">
                </div>
            </div>
        </div>
    </div>
    <h3 class="bg-gray py-2 px-3 mb-2">会員情報</h3>
    <div class="px-3 mb-4">
        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">ユーザーネーム<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <p class="text-small text-dark-gray">半角英数字6文字以上30文字以内で入力してください</p>
                    <p class="text-small mb-2 text-danger">※一度ワンタイムパスワードを発行したユーザーネームは再度使用できません</p>
                    <input id="username-input-mobile" type="text" autocapitalize="none" class="form-control"
                        placeholder="（例）ユーザーネーム" name="username" value="<%= form.username %>">
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="row align-items-center">
                <p class="col-md-4 py-2 text-md-right">パスワード<span class="text-danger ml-2">必須</span></p>
                <div class="col-md-8">
                    <p class="text-small mb-2 text-dark-gray">小文字、大文字、数字、特殊文字（!、#、$、%、^、&、*、_）を含む8文字以上で入力してください</p>
                    <div class="position-relative">
                        <a class="password-eye active text-black" href="#"><i class="far fa-eye"></i></a>
                        <a class="password-eye-slash text-black" href="#"><i class="far fa-eye-slash"></i></a>
                        <input id="password-mobile" onkeyup="checkPasswordMatch('mobile');" type="password"
                            class="form-control" placeholder="（例）パスワード" name="password" value="">
                    </div>
                    <div>
                        <div class="mt-2">
                            <p id="checkPassword-lowerletter-mobile" class="">
                                <span aria-hidden="true" id="check-lowerletter-mobile"></span>
                                <span id="checkPasswordText-lowerletter-mobile"></span>
                            </p>

                            <p id="checkPassword-upperletter-mobile" class="">
                                <span aria-hidden="true" id="check-upperletter-mobile"></span>
                                <span id="checkPasswordText-upperletter-mobile"></span>
                            </p>

                            <p id="checkPassword-length-mobile" class="">
                                <span aria-hidden="true" id="check-length-mobile"></span>
                                <span id="checkPasswordText-length-mobile"></span>
                            </p>

                            <p id="checkPassword-symbols-mobile" class="">
                                <span aria-hidden="true" id="check-symbols-mobile"></span>
                                <span id="checkPasswordText-symbols-mobile"></span>
                            </p>

                            <p id="checkPassword-numbers-mobile" class="">
                                <span aria-hidden="true" id="check-numbers-mobile"></span>
                                <span id="checkPasswordText-numbers-mobile"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="px-3 pb-4">
        <div class="buttons mx-auto text-center">
            <button id="signupButton-mobile" name="signUpButton" type="submit" disabled
                class="btn btn-primary btn-block py-3 mb-3">ワンタイムパスワード発行</button>
            <a class="btn btn-outline-secondary btn-block py-3" href="javascript:history.back();">戻る</a>
        </div>
    </div>
</form>

<div id="emailModal" class="modal fade">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-black">
            <div class="scroll-vertical">
                <div class="p-3">
                    <div class="mb-4">
                        <p class="text-large text-center mb-2">ユーザーネームをお忘れの方</p>
                        <p class="mb-3">
                            各キャリアメールの設定やプロバイダの設定により、迷惑メールフォルダなどに受信されている場合があります。ご利用のメールソフトの全てのフォルダをご確認ください。<br>
                            <br>
                            また、携帯電話の場合は「ドメイン指定受信」や「なりますましメール設定」、「PCからのメール受信拒否設定」などによりメールが受信されない場合があります。<br>
                            「@ticket-cinemasunshine.com」からのメールが受信できるよう受信許可設定へドメインの追加をお願いいたします。<br>
                            <br>
                            下記ボタンから受信許可していただくドメインをコピーしていただけます。<br>
                        </p>
                        <p class="text-center font-weight-bold select-text">@ticket-cinemasunshine.com</p>
                    </div>
                    <button type="button" id="copy-to-clipboard"
                        class="btn btn-primary btn-block py-3 mb-3"><strong>ドメインをコピーする</strong></button>
                    <button type="button" class="btn btn-outline-secondary btn-block py-3"
                        data-dismiss="modal">閉じる</button>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="/js/signup.js"></script>